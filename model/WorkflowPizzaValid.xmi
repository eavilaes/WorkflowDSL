<?xml version="1.0" encoding="UTF-8"?>
<WorkflowMM:Workflow
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:WorkflowMM="http://www.dmss.es/WorkflowMM"
    xsi:schemaLocation="http://www.dmss.es/WorkflowMM ../metamodel/WorkflowMM.ecore">
  <actors id="0"
      name="Customer">
    <tasks xsi:type="WorkflowMM:Begin"
        id="0"
        name="Begin"
        description="Begin tag of the workflow"
        linkedTo="//@actors.0/@tasks.1"/>
    <tasks xsi:type="WorkflowMM:UserTask"
        id="1"
        name="Select a pizza"
        description="The user must fill in a form to select a pizza"
        linkedTo="//@actors.0/@tasks.2"
        linkedFrom="//@actors.0/@tasks.0"
        requires="//@actors.0/@informations.0"/>
    <tasks xsi:type="WorkflowMM:UserTask"
        id="2"
        name="Fill personal info"
        description="The user must fill in his personal info"
        linkedTo="//@actors.0/@tasks.3"
        linkedFrom="//@actors.0/@tasks.1"
        requires="//@actors.0/@informations.2"/>
    <tasks xsi:type="WorkflowMM:ServiceTask"
        id="04"
        name="Calculate total"
        description="Calculate total amount"
        linkedTo="//@actors.0/@tasks.4"
        linkedFrom="//@actors.0/@tasks.2"
        requires="//@actors.0/@informations.4 //@actors.0/@informations.1"
        produces="//@actors.1/@informations.0"/>
    <tasks xsi:type="WorkflowMM:SendMsgTask"
        id="4"
        name="Send pizza order"
        description="Send the pizza order to the restaurant"
        linkedTo="//@actors.1/@tasks.0"
        linkedFrom="//@actors.0/@tasks.3"
        destination="//@actors.1/@tasks.0"
        nextTask="//@actors.0/@tasks.5"/>
    <tasks xsi:type="WorkflowMM:ReceiveMsgTask"
        id="8"
        name="Receive notification"
        description="Receive a notification when the pizza is ready"
        linkedTo="//@actors.0/@tasks.6"
        linkedFrom="//@actors.1/@tasks.2"/>
    <tasks xsi:type="WorkflowMM:UserTask"
        id="9"
        name="Satisfaction questionnaire"
        description="The user fills in a satisfaction questionnaire"
        linkedTo="//@actors.0/@tasks.7"
        linkedFrom="//@actors.0/@tasks.5"
        requires="//@actors.0/@informations.1"/>
    <tasks xsi:type="WorkflowMM:UserTask"
        id="890"
        name="Upload Documents"
        description="Upload documents"
        linkedTo="//@actors.0/@tasks.8"
        linkedFrom="//@actors.0/@tasks.6"
        requires="//@actors.0/@informations.4"/>
    <tasks xsi:type="WorkflowMM:End"
        id="10"
        name="End"
        description="End tag of the workflow"
        linkedFrom="//@actors.0/@tasks.7"/>
    <informations
        id="1"
        type="SELECT_OPTIONS"
        name="type of pizza form">
      <options
          id="0"
          title="Carbonara"/>
      <options
          id="1"
          title="Barbeque"/>
      <options
          id="2"
          title="Margherita"/>
    </informations>
    <informations
        id="2"
        name="Satisfaction Degree">
      <datas
          id="0"
          text="Satisfaction degree"/>
    </informations>
    <informations
        id="2"
        name="Personal Data">
      <datas
          id="1"
          text="Name"
          name="Name"/>
      <datas
          id="2"
          text="Address"
          name="Address"/>
      <datas
          id="3"
          text="Credit card"
          name="Credit Card"/>
    </informations>
    <informations
        id="3"
        name="result data form">
      <datas
          id="4"
          text="Result"/>
    </informations>
    <informations
        id="10"
        type="UPLOAD_FILES"
        name="Documents">
      <files
          id="007"
          path=""
          title="DNI"/>
      <files
          id="008"
          path=""
          title="Credit Card"/>
    </informations>
  </actors>
  <actors id="1"
      name="Pizza Restaurant">
    <tasks xsi:type="WorkflowMM:ReceiveMsgTask"
        id="5"
        name="Receive pizza order"
        description="The restaurant receives a pizza order"
        linkedTo="//@actors.1/@tasks.1"
        linkedFrom="//@actors.0/@tasks.4"/>
    <tasks xsi:type="WorkflowMM:ServiceTask"
        id="6"
        name="Print pizza order"
        description="Print the pizza order to be cooked"
        linkedTo="//@actors.1/@tasks.2"
        linkedFrom="//@actors.1/@tasks.0"
        requires="//@actors.0/@informations.0 //@actors.0/@informations.1"
        produces="//@actors.1/@informations.0"/>
    <tasks xsi:type="WorkflowMM:SendMsgTask"
        id="7"
        name="Notify customer"
        description="Notify the customer when his pizza is ready"
        linkedTo="//@actors.0/@tasks.5"
        linkedFrom="//@actors.1/@tasks.1"
        destination="//@actors.0/@tasks.5"
        nextTask="//@actors.1/@tasks.0"/>
    <informations
        id="3"
        type="UPLOAD_FILES"
        name="order file">
      <files
          id="0"
          path="C:/Users/Pizzeria/orders/1.pdf"/>
    </informations>
  </actors>
</WorkflowMM:Workflow>
